{"version":3,"file":"factories.js","sourceRoot":"","sources":["../../../../src/public/node/themes/factories.ts"],"names":[],"mappings":"AAuBA,MAAM,UAAU,UAAU,CAAC,SAA+B;IACxD,IAAI,CAAC,SAAS;QAAE,OAAM;IAEtB,SAAS,CAAC,UAAU,KAApB,SAAS,CAAC,UAAU,GAAK,KAAK,EAAA;IAC9B,SAAS,CAAC,gBAAgB,KAA1B,SAAS,CAAC,gBAAgB,GAAK,KAAK,EAAA;IAEpC,MAAM,EAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,UAAU,EAAE,gBAAgB,EAAC,GAAG,SAAS,CAAA;IAEhE,OAAO;QACL,EAAE;QACF,IAAI;QACJ,UAAU;QACV,gBAAgB;QAChB,IAAI,EAAE,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI;KACtC,CAAA;AACH,CAAC;AAED,MAAM,UAAU,aAAa,CAAC,KAA2B;IACvD,IAAI,CAAC,KAAK;QAAE,OAAM;IAElB,MAAM,EAAC,GAAG,EAAE,QAAQ,EAAC,GAAG,KAAK,CAAA;IAC7B,OAAO,EAAC,GAAG,EAAE,QAAQ,EAAC,CAAA;AACxB,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,KAA2B;IACzD,IAAI,CAAC,KAAK;QAAE,OAAM;IAElB,MAAM,EAAC,GAAG,EAAE,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAC,GAAG,KAAK,CAAA;IAChD,OAAO,EAAC,GAAG,EAAE,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAC,CAAA;AAC3C,CAAC;AAED,MAAM,UAAU,sBAAsB,CAAC,UAAqC;IAC1E,IAAI,CAAC,UAAU;QAAE,OAAM;IAEvB,OAAO;QACL,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG;QAC9B,OAAO,EAAE,UAAU,CAAC,IAAI,KAAK,GAAG;QAChC,MAAM,EAAE,UAAU,CAAC,MAAM,IAAI,EAAE;QAC/B,KAAK,EAAE,UAAU,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE;KACnC,CAAA;AACH,CAAC","sourcesContent":["import {BulkUploadResult, Checksum, Theme, ThemeAsset} from '@shopify/cli-kit/node/themes/types'\n\ninterface RemoteThemeResponse {\n  id: number\n  name: string\n  role: string\n  createdAtRuntime?: boolean\n  processing?: boolean\n}\n\ninterface RemoteAssetResponse {\n  key: string\n  checksum: string\n  attachment: string\n  value: string\n}\n\ninterface RemoteBulkUploadResponse {\n  body: {asset: RemoteAssetResponse}\n  code: number\n  errors?: string[]\n}\n\nexport function buildTheme(themeJson?: RemoteThemeResponse): Theme | undefined {\n  if (!themeJson) return\n\n  themeJson.processing ??= false\n  themeJson.createdAtRuntime ??= false\n\n  const {id, name, role, processing, createdAtRuntime} = themeJson\n\n  return {\n    id,\n    name,\n    processing,\n    createdAtRuntime,\n    role: role === 'main' ? 'live' : role,\n  }\n}\n\nexport function buildChecksum(asset?: RemoteAssetResponse): Checksum | undefined {\n  if (!asset) return\n\n  const {key, checksum} = asset\n  return {key, checksum}\n}\n\nexport function buildThemeAsset(asset?: RemoteAssetResponse): ThemeAsset | undefined {\n  if (!asset) return\n\n  const {key, checksum, attachment, value} = asset\n  return {key, checksum, attachment, value}\n}\n\nexport function buildBulkUploadResults(bulkUpload?: RemoteBulkUploadResponse): BulkUploadResult | undefined {\n  if (!bulkUpload) return\n\n  return {\n    key: bulkUpload.body.asset.key,\n    success: bulkUpload.code === 200,\n    errors: bulkUpload.errors || [],\n    asset: bulkUpload.body.asset || {},\n  }\n}\n"]}